// RUN: mlir-loop --no-alias --arch x86-64 --cpu skylake --print-assembly --hide-jumps %s 2>&1 | filecheck %s
// UNSUPPORTED: mlir-target=c
// Assembly output will differ a bit when using C.

func.func @myfun(
  %A: memref<256x512xf32>,
  %B: memref<512x256xf32>,
  %C: memref<256x256xf32>
) {
  linalg.generic {
    indexing_maps = [
      affine_map<(d0, d1, d2) -> (d0, d2)>,
      affine_map<(d0, d1, d2) -> (d2, d1)>,
      affine_map<(d0, d1, d2) -> (d0, d1)>
    ],
    iterator_types = ["parallel", "parallel", "reduction"]
  }
    ins(%A, %B : memref<256x512xf32>, memref<512x256xf32>)
    outs(%C : memref<256x256xf32>)
      attrs = {
        loop.dims = ["I","J","K"],
        loop.schedule = {
          "I",
            "J",
              "K",
                "I#1" = {"unroll"},
                  "K#8"= {"unroll"},
                    "J#64" = {"vectorize"}
        }
      }
    {
    ^bb0(%in: f32, %in_0: f32, %out: f32):
      %1 = arith.mulf %in, %in_0 : f32
      %2 = arith.addf %out, %1 : f32
      linalg.yield %2 : f32
    }
  return
}
// CHECK:       <myfun>:
// CHECK-NEXT:  	push   %rbx
// CHECK-NEXT:  	lea    0x1c00(%rsi),%rax
// CHECK-NEXT:  	add    $0x1c,%rdi
// CHECK-NEXT:  	lea    0x1d00(%rsi),%rcx
// CHECK-NEXT:  	lea    0x1e00(%rsi),%r8
// CHECK-NEXT:  	add    $0x1f00,%rsi
// CHECK-NEXT:  	xor    %r9d,%r9d
// CHECK-NEXT:  	data16
// CHECK-NEXT:  	mov    %r9,%r10
// CHECK-NEXT:  	shl    $0xa,%r10
// CHECK-NEXT:  	vmovups 0xe0(%rdx,%r10,1),%ymm0
// CHECK-NEXT:  	vmovups 0xc0(%rdx,%r10,1),%ymm1
// CHECK-NEXT:  	vmovups 0xa0(%rdx,%r10,1),%ymm2
// CHECK-NEXT:  	vmovups 0x80(%rdx,%r10,1),%ymm3
// CHECK-NEXT:  	vmovups (%rdx,%r10,1),%ymm4
// CHECK-NEXT:  	vmovups 0x20(%rdx,%r10,1),%ymm5
// CHECK-NEXT:  	vmovups 0x40(%rdx,%r10,1),%ymm6
// CHECK-NEXT:  	vmovups 0x60(%rdx,%r10,1),%ymm7
// CHECK-NEXT:  	mov    $0xfffffffffffffff8,%r11
// CHECK-NEXT:  	mov    %rax,%rbx
// CHECK-NEXT:  	data16
// CHECK-NEXT:  	vbroadcastss 0x4(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1b20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1b40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1b60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1b80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1ba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1bc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1c00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x1be0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x8(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x17e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x17c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x17a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0xc(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x13a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x13c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x13e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x10(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xfe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1000(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xfc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xfa0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xf80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xf60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xf40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xf20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x14(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xb20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0xb40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xb60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xb80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xbc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xc00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xbe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x18(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x7e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x7c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x7a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x1c(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x3a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x3c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x3e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x20(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps 0x20(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps (%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps 0x40(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps 0x60(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps 0x80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps 0xa0(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps 0xc0(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps 0xe0(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	add    $0x8,%r11
// CHECK-NEXT:  	add    $0x2000,%rbx
// CHECK-NEXT:  	cmp    $0x1f8,%r11
// CHECK-NEXT:  	jb     <myfun+0x90>
// CHECK-NEXT:  	vmovups %ymm4,(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm5,0x20(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm6,0x40(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm7,0x60(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm3,0x80(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm2,0xa0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm1,0xc0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm0,0xe0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups 0x1e0(%rdx,%r10,1),%ymm0
// CHECK-NEXT:  	vmovups 0x1c0(%rdx,%r10,1),%ymm1
// CHECK-NEXT:  	vmovups 0x1a0(%rdx,%r10,1),%ymm2
// CHECK-NEXT:  	vmovups 0x180(%rdx,%r10,1),%ymm3
// CHECK-NEXT:  	vmovups 0x100(%rdx,%r10,1),%ymm4
// CHECK-NEXT:  	vmovups 0x120(%rdx,%r10,1),%ymm5
// CHECK-NEXT:  	vmovups 0x140(%rdx,%r10,1),%ymm6
// CHECK-NEXT:  	vmovups 0x160(%rdx,%r10,1),%ymm7
// CHECK-NEXT:  	mov    $0xfffffffffffffff8,%r11
// CHECK-NEXT:  	mov    %rcx,%rbx
// CHECK-NEXT:  	vbroadcastss 0x4(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1b20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1b40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1b60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1b80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1ba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1bc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1c00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x1be0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x8(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x17e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x17c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x17a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0xc(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x13a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x13c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x13e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x10(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xfe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1000(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xfc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xfa0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xf80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xf60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xf40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xf20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x14(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xb20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0xb40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xb60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xb80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xbc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xc00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xbe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x18(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x7e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x7c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x7a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x1c(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x3a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x3c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x3e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x20(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps 0x20(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps (%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps 0x40(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps 0x60(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps 0x80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps 0xa0(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps 0xc0(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps 0xe0(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	add    $0x8,%r11
// CHECK-NEXT:  	add    $0x2000,%rbx
// CHECK-NEXT:  	cmp    $0x1f8,%r11
// CHECK-NEXT:  	jb     <myfun+0x3b0>
// CHECK-NEXT:  	vmovups %ymm4,0x100(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm5,0x120(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm6,0x140(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm7,0x160(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm3,0x180(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm2,0x1a0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm1,0x1c0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm0,0x1e0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups 0x2e0(%rdx,%r10,1),%ymm0
// CHECK-NEXT:  	vmovups 0x2c0(%rdx,%r10,1),%ymm1
// CHECK-NEXT:  	vmovups 0x2a0(%rdx,%r10,1),%ymm2
// CHECK-NEXT:  	vmovups 0x280(%rdx,%r10,1),%ymm3
// CHECK-NEXT:  	vmovups 0x200(%rdx,%r10,1),%ymm4
// CHECK-NEXT:  	vmovups 0x220(%rdx,%r10,1),%ymm5
// CHECK-NEXT:  	vmovups 0x240(%rdx,%r10,1),%ymm6
// CHECK-NEXT:  	vmovups 0x260(%rdx,%r10,1),%ymm7
// CHECK-NEXT:  	mov    $0xfffffffffffffff8,%r11
// CHECK-NEXT:  	mov    %r8,%rbx
// CHECK-NEXT:  	nopl   (%rax)
// CHECK-NEXT:  	vbroadcastss 0x4(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1b20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1b40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1b60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1b80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1ba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1bc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1c00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x1be0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x8(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x17e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x17c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x17a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0xc(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x13a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x13c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x13e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x10(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xfe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1000(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xfc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xfa0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xf80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xf60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xf40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xf20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x14(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xb20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0xb40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xb60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xb80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xbc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xc00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xbe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x18(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x7e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x7c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x7a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x1c(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x3a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x3c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x3e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x20(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps 0x20(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps (%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps 0x40(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps 0x60(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps 0x80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps 0xa0(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps 0xc0(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps 0xe0(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	add    $0x8,%r11
// CHECK-NEXT:  	add    $0x2000,%rbx
// CHECK-NEXT:  	cmp    $0x1f8,%r11
// CHECK-NEXT:  	jb     <myfun+0x6e0>
// CHECK-NEXT:  	vmovups %ymm4,0x200(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm5,0x220(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm6,0x240(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm7,0x260(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm3,0x280(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm2,0x2a0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm1,0x2c0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm0,0x2e0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups 0x3e0(%rdx,%r10,1),%ymm0
// CHECK-NEXT:  	vmovups 0x3c0(%rdx,%r10,1),%ymm1
// CHECK-NEXT:  	vmovups 0x3a0(%rdx,%r10,1),%ymm2
// CHECK-NEXT:  	vmovups 0x380(%rdx,%r10,1),%ymm3
// CHECK-NEXT:  	vmovups 0x300(%rdx,%r10,1),%ymm4
// CHECK-NEXT:  	vmovups 0x320(%rdx,%r10,1),%ymm5
// CHECK-NEXT:  	vmovups 0x340(%rdx,%r10,1),%ymm6
// CHECK-NEXT:  	vmovups 0x360(%rdx,%r10,1),%ymm7
// CHECK-NEXT:  	mov    $0xfffffffffffffff8,%r11
// CHECK-NEXT:  	mov    %rsi,%rbx
// CHECK-NEXT:  	nopl   (%rax)
// CHECK-NEXT:  	vbroadcastss 0x4(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1b20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1b40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1b60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1b80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1ba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1bc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1c00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x1be0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x8(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x17e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x17c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x17a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0xc(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x13a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x13c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x13e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x10(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xfe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1000(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xfc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xfa0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xf80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xf60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xf40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xf20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x14(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xb20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0xb40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xb60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xb80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xbc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xc00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xbe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x18(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x7e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x7c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x7a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x1c(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x3a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x3c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x3e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x20(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps 0x20(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps (%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps 0x40(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps 0x60(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps 0x80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps 0xa0(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps 0xc0(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps 0xe0(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	add    $0x8,%r11
// CHECK-NEXT:  	add    $0x2000,%rbx
// CHECK-NEXT:  	cmp    $0x1f8,%r11
// CHECK-NEXT:  	jb     <myfun+0xa10>
// CHECK-NEXT:  	vmovups %ymm4,0x300(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm5,0x320(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm6,0x340(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm7,0x360(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm3,0x380(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm2,0x3a0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm1,0x3c0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm0,0x3e0(%rdx,%r10,1)
// CHECK-NEXT:  	add    $0x800,%rdi
// CHECK-NEXT:  	cmp    $0xff,%r9
// CHECK-NEXT:  	lea    0x1(%r9),%r9
// CHECK-NEXT:  	jb     <myfun+0x30>
// CHECK-NEXT:  	pop    %rbx
// CHECK-NEXT:  	vzeroupper 
// CHECK-NEXT:  	ret   
