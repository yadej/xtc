// RUN: mlir-loop --no-alias --arch x86-64 --cpu skylake --print-assembly --hide-jumps %s 2>&1 | filecheck %s
// UNSUPPORTED: mlir-target=c
// Assembly output will differ a bit when using C.

func.func @myfun(
  %A: memref<258x512xf32>,
  %B: memref<512x256xf32>,
  %C: memref<258x256xf32>
) {
  linalg.matmul
    {
      loop.dims = ["I","J","K"],
      loop.schedule = {
        "I[:2]" = {
          "K",
            "J"
        },
        "I[2:]" = {
          "J",
            "K",
              "I#1",
                "K#8",
                  "J#64" = {"vectorize"}
        }
      }
    }
    ins(%A, %B : memref<258x512xf32>, memref<512x256xf32>)
    outs(%C : memref<258x256xf32>)
  return
}
// CHECK:       <myfun>:
// CHECK-NEXT:  	push   %rbx
// CHECK-NEXT:  	xor    %ecx,%ecx
// CHECK-NEXT:  	mov    %rsi,%rax
// CHECK-NEXT:  	cs nopw 0x0(%rax,%rax,1)
// CHECK-NEXT:  	vmovss (%rdi,%rcx,4),%xmm0
// CHECK-NEXT:  	mov    $0xffffffffffffffff,%r8
// CHECK-NEXT:  	nopl   0x0(%rax)
// CHECK-NEXT:  	vmulss 0x4(%rax,%r8,4),%xmm0,%xmm1
// CHECK-NEXT:  	vaddss 0x4(%rdx,%r8,4),%xmm1,%xmm1
// CHECK-NEXT:  	vmovss %xmm1,0x4(%rdx,%r8,4)
// CHECK-NEXT:  	inc    %r8
// CHECK-NEXT:  	cmp    $0xff,%r8
// CHECK-NEXT:  	jb     <myfun+0x20>
// CHECK-NEXT:  	add    $0x400,%rax
// CHECK-NEXT:  	cmp    $0x1ff,%rcx
// CHECK-NEXT:  	lea    0x1(%rcx),%rcx
// CHECK-NEXT:  	jb     <myfun+0x10>
// CHECK-NEXT:  	xor    %ecx,%ecx
// CHECK-NEXT:  	mov    %rsi,%rax
// CHECK-NEXT:  	nopl   0x0(%rax)
// CHECK-NEXT:  	vmovss 0x800(%rdi,%rcx,4),%xmm0
// CHECK-NEXT:  	mov    $0xffffffffffffffff,%r8
// CHECK-NEXT:  	vmulss 0x4(%rax,%r8,4),%xmm0,%xmm1
// CHECK-NEXT:  	vaddss 0x404(%rdx,%r8,4),%xmm1,%xmm1
// CHECK-NEXT:  	vmovss %xmm1,0x404(%rdx,%r8,4)
// CHECK-NEXT:  	inc    %r8
// CHECK-NEXT:  	cmp    $0xff,%r8
// CHECK-NEXT:  	jb     <myfun+0x70>
// CHECK-NEXT:  	add    $0x400,%rax
// CHECK-NEXT:  	cmp    $0x1ff,%rcx
// CHECK-NEXT:  	lea    0x1(%rcx),%rcx
// CHECK-NEXT:  	jb     <myfun+0x60>
// CHECK-NEXT:  	lea    0x1c00(%rsi),%rax
// CHECK-NEXT:  	lea    0x1d00(%rsi),%rcx
// CHECK-NEXT:  	lea    0x1e00(%rsi),%r8
// CHECK-NEXT:  	add    $0x1f00,%rsi
// CHECK-NEXT:  	add    $0x101c,%rdi
// CHECK-NEXT:  	xor    %r9d,%r9d
// CHECK-NEXT:  	mov    %r9,%r10
// CHECK-NEXT:  	shl    $0xa,%r10
// CHECK-NEXT:  	vmovups 0x8e0(%rdx,%r10,1),%ymm0
// CHECK-NEXT:  	vmovups 0x8c0(%rdx,%r10,1),%ymm1
// CHECK-NEXT:  	vmovups 0x8a0(%rdx,%r10,1),%ymm2
// CHECK-NEXT:  	vmovups 0x880(%rdx,%r10,1),%ymm3
// CHECK-NEXT:  	vmovups 0x800(%rdx,%r10,1),%ymm4
// CHECK-NEXT:  	vmovups 0x820(%rdx,%r10,1),%ymm5
// CHECK-NEXT:  	vmovups 0x840(%rdx,%r10,1),%ymm6
// CHECK-NEXT:  	vmovups 0x860(%rdx,%r10,1),%ymm7
// CHECK-NEXT:  	mov    $0xfffffffffffffff8,%r11
// CHECK-NEXT:  	mov    %rax,%rbx
// CHECK-NEXT:  	data16
// CHECK-NEXT:  	vbroadcastss 0x4(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1b20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1b40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1b60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1b80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1ba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1bc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1c00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x1be0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x8(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x17e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x17c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x17a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0xc(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x13a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x13c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x13e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x10(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xfe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1000(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xfc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xfa0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xf80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xf60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xf40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xf20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x14(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xb20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0xb40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xb60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xb80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xbc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xc00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xbe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x18(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x7e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x7c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x7a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x1c(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x3a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x3c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x3e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x20(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps 0x20(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps (%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps 0x40(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps 0x60(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps 0x80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps 0xa0(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps 0xc0(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps 0xe0(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	add    $0x8,%r11
// CHECK-NEXT:  	add    $0x2000,%rbx
// CHECK-NEXT:  	cmp    $0x1f8,%r11
// CHECK-NEXT:  	jb     <myfun+0x140>
// CHECK-NEXT:  	vmovups %ymm4,0x800(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm5,0x820(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm6,0x840(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm7,0x860(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm3,0x880(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm2,0x8a0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm1,0x8c0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm0,0x8e0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups 0x9e0(%rdx,%r10,1),%ymm0
// CHECK-NEXT:  	vmovups 0x9c0(%rdx,%r10,1),%ymm1
// CHECK-NEXT:  	vmovups 0x9a0(%rdx,%r10,1),%ymm2
// CHECK-NEXT:  	vmovups 0x980(%rdx,%r10,1),%ymm3
// CHECK-NEXT:  	vmovups 0x900(%rdx,%r10,1),%ymm4
// CHECK-NEXT:  	vmovups 0x920(%rdx,%r10,1),%ymm5
// CHECK-NEXT:  	vmovups 0x940(%rdx,%r10,1),%ymm6
// CHECK-NEXT:  	vmovups 0x960(%rdx,%r10,1),%ymm7
// CHECK-NEXT:  	mov    $0xfffffffffffffff8,%r11
// CHECK-NEXT:  	mov    %rcx,%rbx
// CHECK-NEXT:  	nopl   (%rax)
// CHECK-NEXT:  	vbroadcastss 0x4(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1b20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1b40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1b60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1b80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1ba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1bc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1c00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x1be0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x8(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x17e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x17c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x17a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0xc(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x13a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x13c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x13e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x10(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xfe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1000(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xfc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xfa0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xf80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xf60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xf40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xf20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x14(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xb20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0xb40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xb60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xb80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xbc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xc00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xbe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x18(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x7e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x7c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x7a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x1c(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x3a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x3c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x3e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x20(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps 0x20(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps (%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps 0x40(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps 0x60(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps 0x80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps 0xa0(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps 0xc0(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps 0xe0(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	add    $0x8,%r11
// CHECK-NEXT:  	add    $0x2000,%rbx
// CHECK-NEXT:  	cmp    $0x1f8,%r11
// CHECK-NEXT:  	jb     <myfun+0x470>
// CHECK-NEXT:  	vmovups %ymm4,0x900(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm5,0x920(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm6,0x940(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm7,0x960(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm3,0x980(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm2,0x9a0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm1,0x9c0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm0,0x9e0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups 0xae0(%rdx,%r10,1),%ymm0
// CHECK-NEXT:  	vmovups 0xac0(%rdx,%r10,1),%ymm1
// CHECK-NEXT:  	vmovups 0xaa0(%rdx,%r10,1),%ymm2
// CHECK-NEXT:  	vmovups 0xa80(%rdx,%r10,1),%ymm3
// CHECK-NEXT:  	vmovups 0xa00(%rdx,%r10,1),%ymm4
// CHECK-NEXT:  	vmovups 0xa20(%rdx,%r10,1),%ymm5
// CHECK-NEXT:  	vmovups 0xa40(%rdx,%r10,1),%ymm6
// CHECK-NEXT:  	vmovups 0xa60(%rdx,%r10,1),%ymm7
// CHECK-NEXT:  	mov    $0xfffffffffffffff8,%r11
// CHECK-NEXT:  	mov    %r8,%rbx
// CHECK-NEXT:  	nopl   (%rax)
// CHECK-NEXT:  	vbroadcastss 0x4(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1b20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1b40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1b60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1b80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1ba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1bc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1c00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x1be0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x8(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x17e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x17c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x17a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0xc(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x13a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x13c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x13e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x10(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xfe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1000(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xfc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xfa0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xf80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xf60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xf40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xf20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x14(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xb20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0xb40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xb60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xb80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xbc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xc00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xbe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x18(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x7e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x7c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x7a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x1c(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x3a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x3c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x3e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x20(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps 0x20(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps (%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps 0x40(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps 0x60(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps 0x80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps 0xa0(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps 0xc0(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps 0xe0(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	add    $0x8,%r11
// CHECK-NEXT:  	add    $0x2000,%rbx
// CHECK-NEXT:  	cmp    $0x1f8,%r11
// CHECK-NEXT:  	jb     <myfun+0x7a0>
// CHECK-NEXT:  	vmovups %ymm4,0xa00(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm5,0xa20(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm6,0xa40(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm7,0xa60(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm3,0xa80(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm2,0xaa0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm1,0xac0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm0,0xae0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups 0xbe0(%rdx,%r10,1),%ymm0
// CHECK-NEXT:  	vmovups 0xbc0(%rdx,%r10,1),%ymm1
// CHECK-NEXT:  	vmovups 0xba0(%rdx,%r10,1),%ymm2
// CHECK-NEXT:  	vmovups 0xb80(%rdx,%r10,1),%ymm3
// CHECK-NEXT:  	vmovups 0xb00(%rdx,%r10,1),%ymm4
// CHECK-NEXT:  	vmovups 0xb20(%rdx,%r10,1),%ymm5
// CHECK-NEXT:  	vmovups 0xb40(%rdx,%r10,1),%ymm6
// CHECK-NEXT:  	vmovups 0xb60(%rdx,%r10,1),%ymm7
// CHECK-NEXT:  	mov    $0xfffffffffffffff8,%r11
// CHECK-NEXT:  	mov    %rsi,%rbx
// CHECK-NEXT:  	nopl   (%rax)
// CHECK-NEXT:  	vbroadcastss 0x4(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1b20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1b40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1b60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1b80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1ba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1bc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1c00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x1be0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x8(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x17e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x17c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x17a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x1780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x1760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0xc(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x1320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x1340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x1360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x1380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x13a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x13c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x1400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x13e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x10(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xfe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x1000(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xfc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xfa0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xf80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xf60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xf40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xf20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x14(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0xb20(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0xb40(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0xb60(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0xb80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0xba0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0xbc0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0xc00(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0xbe0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x18(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x7e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps -0x800(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x7c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x7a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x780(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x760(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x740(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x720(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vbroadcastss 0x1c(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps -0x320(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	vfmadd231ps -0x340(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps -0x360(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps -0x380(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps -0x3a0(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps -0x3c0(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps -0x400(%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps -0x3e0(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vbroadcastss 0x20(%rdi,%r11,4),%ymm8
// CHECK-NEXT:  	vfmadd231ps 0x20(%rbx),%ymm8,%ymm5
// CHECK-NEXT:  	vfmadd231ps (%rbx),%ymm8,%ymm4
// CHECK-NEXT:  	vfmadd231ps 0x40(%rbx),%ymm8,%ymm6
// CHECK-NEXT:  	vfmadd231ps 0x60(%rbx),%ymm8,%ymm7
// CHECK-NEXT:  	vfmadd231ps 0x80(%rbx),%ymm8,%ymm3
// CHECK-NEXT:  	vfmadd231ps 0xa0(%rbx),%ymm8,%ymm2
// CHECK-NEXT:  	vfmadd231ps 0xc0(%rbx),%ymm8,%ymm1
// CHECK-NEXT:  	vfmadd231ps 0xe0(%rbx),%ymm8,%ymm0
// CHECK-NEXT:  	add    $0x8,%r11
// CHECK-NEXT:  	add    $0x2000,%rbx
// CHECK-NEXT:  	cmp    $0x1f8,%r11
// CHECK-NEXT:  	jb     <myfun+0xad0>
// CHECK-NEXT:  	vmovups %ymm4,0xb00(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm5,0xb20(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm6,0xb40(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm7,0xb60(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm3,0xb80(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm2,0xba0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm1,0xbc0(%rdx,%r10,1)
// CHECK-NEXT:  	vmovups %ymm0,0xbe0(%rdx,%r10,1)
// CHECK-NEXT:  	add    $0x800,%rdi
// CHECK-NEXT:  	cmp    $0xff,%r9
// CHECK-NEXT:  	lea    0x1(%r9),%r9
// CHECK-NEXT:  	jb     <myfun+0xd0>
// CHECK-NEXT:  	pop    %rbx
// CHECK-NEXT:  	vzeroupper 
// CHECK-NEXT:  	ret
